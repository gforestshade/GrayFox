!function(n){var e=this||n||{};function t(n,e){if(e<=0)return"";var t="";do{1&e&&(t+=n)}while((e>>=1)>=1&&(n+=n));return t}void 0!==e.agh?n=e.agh:void 0!==e.module&&void 0!==e.module.exports?n=e.module.exports:null==n&&(n=e.agh={});var r=4294967296,i=-2147483648,l=2147483647,u=r*r,c=-u/2,a=-c-1;function s(n){return n<0?Math.ceil(n):Math.floor(n)}function o(n,e){switch(n=s(n),e){case"hh":return(n&=255)>=128?n-256:n;case"h":return(n&=65535)>=32768?n-65536:n;case"l":case"z":case"t":case"I32":case"I":return(n%=r)<i?n+=r:n>l&&(n-=r),n;case"ll":case"I64":case"q":case"L":return(n%=u)<c?n+=u:n>a&&(n-=u),n;case"j":default:return n}}function g(n,e){switch(n=s(n),e){case"hh":return n&=255;case"h":return n&=65535;case"l":case"z":case"t":case"I32":case"I":return(n%=r)<0?n+r:n;case"ll":case"I64":case"q":case"L":return(n%=u)<0?n+u:n;case"j":default:if(n<0){var t=n<i?1+Math.ceil(Math.LOG2E*Math.log(-n)):32;n+=Math.pow(2,t)}return n}}function f(n,e){if("h"===e||"hh"===e){var t=n<0?-1:1,r=Math.floor(Math.LOG2E*Math.log(t*n)),i=Math.pow(2,r-23);n=(0|n/i)*i}return n}function h(n,e){return n|=0,"h"!==e&&"hh"!==e||(n&=255),n}var v=[/(...)(?!$)/g,/(^.|...)(?!$)/g,/(^..|...)(?!$)/g];function p(n,e){return n.length<4||!/\'/.test(e)?n:n.replace(v[n.length%3],"$1,")}var d="0123456789abcdef";function x(n,e,r,i){var l="";do{l=d.charAt(n%i)+l,n=Math.floor(n/i)}while(n>0);return null!=r&&(l=t("0",r-l.length)+l),l}function M(n,e,t,r){return p(x(n,0,t,10),e)}function w(n,e,t,r){return x(n,0,t,16).toUpperCase()}var $=[];function A(n,e){if(0===n)return[0,0];var t=1+Math.floor($[e]*Math.log(n));return(n*=Math.pow(e,-t))*e<1?(n*=e,t--):n>=1&&(n/=e,t++),[n,t]}$[2]=Math.LOG2E,$[10]=Math.LOG10E,$[16]=Math.LOG2E/4;var C=[];function L(n,e,r){for(var i="";--e>0;)i+=d.charAt(0|(n=n*r%r));var l=Math.round(n*r%r);if(l==r){var u=C[r].exec(i)[0].length;if(u<i.length){var c=i.length-u-1;i=i.slice(0,c)+d.charAt(1+(0|i.charAt(c)))+t("0",u+1)}else i="1"+t("0",u+1)}else i+=d.charAt(l);return i}function N(n,e){return n.replace(/(\.[\da-f]*?)0+$/,function(n,t){return t&&t.length>1?t:/#/.test(e)?".":""})}function E(n,e,t,r){if(isNaN(n))return"nan";if(!isFinite(n))return"inf";null==t&&(t=6);var i=A(n,10),l=i[0],u=i[1]-1,c=L(l,1+t,10);return c.length>t+1&&(c=c.slice(0,-1),u++),(t>0||/#/.test(e))&&(c=c.slice(0,1)+"."+c.slice(1)),c+(u=u<0?"e-"+(1e3-u).toString().slice(1):"e+"+(1e3+u).toString().slice(1))}function I(n,e,t,r){if(isNaN(n))return"nan";if(!isFinite(n))return"inf";null==t&&(t="h"===r||"hh"===r?6:13);var i=A(n,2),l=i[0],u=i[1]-1,c=L(1/8*l,t+1,16);return c.length>t+1&&(c=c.slice(0,-1),u++),(c.length>1||/#/.test(e))&&(c=c.slice(0,1)+"."+c.slice(1)),(c=N(c,e))+(u=u<0?"p-"+(1e3-u).toString().slice(1):"p+"+(1e3+u).toString().slice(1))}function S(n,e,t,r){if(isNaN(n))return"nan";if(!isFinite(n))return"inf";if(null==t&&(t=6),n>=1)var i=A(n,10),l=i[0],u=i[1];else l=n/10,u=1;var c=L(l,u+t,10);if(t>0||/#/.test(e)){var a=c.length-t;c=p(c.slice(0,a),e)+"."+c.slice(a)}else c=p(c,e);return c}function m(n,e,r,i){if(isNaN(n))return"nan";if(!isFinite(n))return"inf";if(null==r?r=6:r<1&&(r=1),n<1e-4||Math.pow(10,r)<=n+.5){var l=E(n,e,r-1);return/#/.test(e)?l:function(n,e){return n.replace(/(\.\d*?)0+e/,function(n,t){return t&&t.length>1?t+"e":/#/.test(e)?".e":"e"})}(l,e)}var u=A(n,10),c=u[0],a=u[1];r<1&&(r=1);var s=L(c,r,10),o=s.length-(r-a);return o>0?(o<s.length||/#/.test(e))&&(s=p(s.slice(0,o),e)+"."+s.slice(o,r)):s="0."+t("0",-o)+s.slice(0,r),/#/.test(e)?s:N(s,e)}function G(n,e,t,r){return String.fromCharCode(n)}function F(n,e,t,r){return n=null==n?void 0===n?"(undefined)":"(null)":n.toString(),null!=t&&(n=n.slice(0,t)),n}C[10]=/9*$/,C[16]=/f*$/;var O={d:{getv:o,integral:!0,signed:!0,prefix:null,conv:M},i:{getv:o,integral:!0,signed:!0,prefix:null,conv:M},u:{getv:g,integral:!0,signed:!1,prefix:null,conv:M},o:{getv:g,integral:!0,signed:!1,prefix:function(n){return/#/.test(n)?"0":""},conv:function(n,e,t,r){return x(n,0,t,8)}},x:{getv:g,integral:!0,signed:!1,prefix:function(n){return/#/.test(n)?"0x":""},conv:function(n,e,t,r){return x(n,0,t,16)}},X:{getv:g,integral:!0,signed:!1,prefix:function(n){return/#/.test(n)?"0X":""},conv:w},e:{getv:f,integral:!1,signed:!0,prefix:null,conv:E},E:{getv:f,integral:!1,signed:!0,prefix:null,conv:function(n,e,t,r){return E(n,e,t).toUpperCase()}},f:{getv:f,integral:!1,signed:!0,prefix:null,conv:S},F:{getv:f,integral:!1,signed:!0,prefix:null,conv:function(n,e,t,r){return S(n,e,t).toUpperCase()}},g:{getv:f,integral:!1,signed:!0,prefix:null,conv:m},G:{getv:f,integral:!1,signed:!0,prefix:null,conv:function(n,e,t,r){return m(n,e,t).toUpperCase()}},a:{getv:f,integral:!1,signed:!0,prefix:function(n){return"0x"},conv:I},A:{getv:f,integral:!1,signed:!0,prefix:function(n){return"0X"},conv:function(n,e,t,r){return I(n,e,t,r).toUpperCase()}},c:{getv:h,integral:!1,signed:!1,prefix:null,conv:G},C:{getv:h,integral:!1,signed:!1,prefix:null,conv:G},s:{getv:null,integral:!1,signed:!1,prefix:null,conv:F},S:{getv:null,integral:!1,signed:!1,prefix:null,conv:F},p:{getv:g,integral:!1,signed:!1,prefix:function(n){return"0x"},conv:w},n:{getv:null,integral:!1,signed:!1,prefix:null,conv:function(n,e,t,r,i){return n[0]=o(i,r),""}},"%":{noValue:!0,integral:!1,signed:!1,prefix:null,conv:function(n,e,t,r){return"%"}}};function U(n){var e=arguments,r=1,i=0,l=0,u=n.replace(/%(?:(\d+)\$)?([-+ 0#']*)(\d+|\*(?:\d+\$)?)?(\.(?:\d+|\*(?:\d+\$)?)?)?(hh|ll|I(?:32|64)?|[hlLjztqw])?(.|$)/g,function(n,u,c,a,s,o,g,f){if(l+=f-i,i=f+n.length,null==(g=O[g]))return l+=(p="(sprintf:error:"+n+")").length,p;u=null==u||""===u?null:"*"===u?0|e[r++]:0|u,a=null==a||""===a?0:"*"===a?0|e[r++]:"*"===a.charAt(0)?e[0|a.slice(1,-1)]:0|a,s=null==s||""===s?null:".*"===s?0|e[r++]:"*"===s.charAt(1)?e[0|s.slice(2,-1)]:0|s.slice(1);var h=g.noValue?null:null===u?e[r++]:e[u];g.getv&&(h=g.getv(h,o));var v="";g.signed&&(h<0?(v="-",h=-h):/\+/.test(c)?v="+":/ /.test(c)&&(v=" ")),g.prefix&&0!=h&&(v+=g.prefix(c));var p,d=g.conv(h,c,s,o,l),x="",M="",w="";return(a-=v.length+d.length)>=1&&(/-/.test(c)?w=t(" ",a):!/0/.test(c)||g.integral&&null!=s?x=t(" ",a):M=t("0",a)),l+=(p=x+v+M+d+w).length,p});return[l+=n.length-i,u]}n.sprintf=function(){return U.apply(this,arguments)[1]},n.vsprintf=function(n,e){return U.apply(this,[n].concat(e))[1]};var j=null;j=e.agh&&e.printh?function(n){printh(agh.Text.Escape(n,"html"))}:e.process&&e.process.stdout?function(n){process.stdout.write(n)}:e.console&&e.console.log?function(n){console.log(n)}:function(n){document.write(n)},n.printf=function(){var n=U.apply(this,arguments);return j(n[1]),n[0]},e.agh&&e.agh.scripts&&e.agh.scripts.register("agh.sprintf.js")}(this);
